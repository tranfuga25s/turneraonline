/*!
 * bootstrap-limit.js 0.1.0
 * https://github.com/trongrg/bootstrap-limit
 * Copyright 2013 TrongTran and other contributors; Licensed MIT
 */

var VERSION="0.1.0";!function(t){"use strict";var i=function(i,e){this.$element=t(i),this.options=t.extend({},t.fn.limit.defaults,{maxLength:parseInt(this.$element.attr("maxlength"),10)},e),this.$counter=t(this.options.counter)||this.$counter,this.initialize()};i.prototype={constructor:i,initialize:function(){this.initEvents(),this.update(),this.options.removeMaxLengthAttr&&this.$element.removeAttr("maxlength");var i=this;t.when.apply(t,this.$element.get()).always(function(){setTimeout(function(){i.$element.trigger("bootstrap-limit:initialized")},0)})},initEvents:function(){this.$element.on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this))},update:function(){this.query=this.$element.val(),this.$counter.text(this.options.maxLength-this.query.length),this.query.length>this.options.maxLength?(this.$counter.css("color",this.options.color),this.$element.trigger("bootstrap-limit:crossed")):this.query.length>this.options.maxLength-this.options.threshold?(this.$counter.css("color",this.options.color),this.$element.trigger("bootstrap-limit:uncrossed")):(this.$counter.removeAttr("style"),this.$element.trigger("bootstrap-limit:uncrossed"))},keyup:function(t){this.update(),t.stopPropagation(),t.preventDefault()},keypress:function(t){this.update(),t.stopPropagation()}},t.fn.limit=function(e){return this.each(function(){var o=t(this),n=o.data("bootstrap-limit"),s="object"==typeof e&&e;n||o.data("bootstrap-limit",n=new i(this,s)),"string"==typeof e&&n[e]()})},t.fn.limit.defaults={maxLength:140,color:"red",threshold:10,counter:"",removeMaxLengthAttr:!1},t.fn.limit.Constructor=i,t(function(){t("body").on("focus.bootstrap-limit.data-api",'[data-provide="bootstrap-limit"]',function(i){var e=t(this);e.data("bootstrap-limit")||(i.preventDefault(),e.limit(e.data()))})})}(window.jQuery);